# mmkit

## Стандартизация
Этот раздел я решил добавить когда в очередной раз запутался в том, как мне назвать очередное представление, какой
сделать путь и т.д. и т.п. Поэтому я решил далее придерживаться правил, описанных далее.

### Модели
- Название модели - существительное, а если существительное подобрать не получается, то это неправильная модель.
- В классе Meta в каждой модели должны быть: *app_label*, *verbose_name*, *verbose_name_plural*
- Если у модели будут страницы для просмотра деталей или редактирования, то она должна описывать несколько
  дополнительных методов (в зависимости от того, какие именно действия с ней можно будет осуществить):
    - **get_absolute_url**, возвращающий ссылку на страницу с детальным описанием модели
    - **get_absolute_url_title**, возвращающий заголовок страницы с детальным описанием модели
    - **get_create_url** (статический), возвращающий ссылку на страницу для создания нового экземпляра модели
    - **get_create_url_title** (статический), возвращающий заголовок страницы для создания нового экземпляра модели
    - **get_update_url**, возвращающий ссылку на страницу для редактирования существующей модели
    - **get_update_url_title**, возвращающий заголовок страницы для редактирования существующей модели
    - **get_delete_url**, возвращающий ссылку на страницу для удаления существующей модели
    - **get_delete_url_title**, возвращающий заголовой страницы для удаления существующей модели
  
### URL, представления и AJAX-запросы
Допустим, в приложении описана модель Item (элемент). Есть связанная с ней модель Category (категория). Получается так:

- **items/** - Первая страница списка элементов
- **items/page/2/** - Заданная страница списка элементов
- **items/12/** - Детальное описание элемента
- **items/create/** - Создание нового элемента
- **items/12/update/** - Обновление существующего элемента
- **items/12/delete/** - Удаление существующего элемента
- **items/12/categories** - Список категорий для элемента с ID 12
- **items/12/categories/create** - Добавление новой категории элементу с ID 12

Для AJAX-запросов можно так:

- **items/_get/** - для GET-запросов, связанных с моделью Item
- **items/_get/?id=12 - Детали элемента с ID 12
- **items/_post/** - для POST-запросов, связанных с моделью Item

Формат ответа для таких запросов всегда одинаковый - это JSON-объект следующего вида:

`{
    status: <статус запроса>,
    data: <данные в JSON-представлении>
}`

Статусов пока предусмотрено всего два - это 'ok' и 'err', обозначающие успех и ошибку соответственно. Если статус 'err',
то 'data' сохраняет соответствующее текстовое сообщение. Данных может и не быть, если достаточно только статуса.

Когда какие-то действия нельзя уложить в стандартные CRUD, то для таких действий надо придумать что-то своё.
## Рекомендации по настройке среды разработки
### PyCharm
1. Поскольку этот проект использует разные конфигурации для тестирования, разработки и непосредственного использования,
   для нормального запуска нужно явно указать значение DJANGO_SETTINGS_MODULE в списке "Environment variables". Лучше
   всего это сделать в секции "Defaults" ("Run/Debug Configurations") как для "Django tests", так и "Django server" -
   тогда все создаваемые в дальнейшем конфигурации (в том числе - создаваемые динамически самим PyCharm) будут
   автоматически наследовать эти значения: **Django tests** - *DJANGO_SETTINGS_MODULE=mmkit.conf.test_local*, **Django
   server** - *DJANGO_SETTINGS_MODULE=mmkit.conf.dev_local*.
   